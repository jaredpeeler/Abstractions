<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Interface IMoneyInMerchant
   | DirectScale Abstractions </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Interface IMoneyInMerchant
   | DirectScale Abstractions ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant">
  
  
  <h1 id="DirectScale_Disco_Extension_IMoneyInMerchant" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant" class="text-break">Interface IMoneyInMerchant
  </h1>
  <div class="markdown level0 summary"><p>IMoneyInMerchant Is the base interface for creating custom money in merchants.
Do not implement directly. You must implement one of the children abstract classes:
<a class="xref" href="DirectScale.Disco.Extension.SavedPaymentMoneyInMerchant.html">SavedPaymentMoneyInMerchant</a>, <a class="xref" href="DirectScale.Disco.Extension.SinglePaymentMoneyInMerchant.html">SinglePaymentMoneyInMerchant</a>, or <a class="xref" href="DirectScale.Disco.Extension.RedirectMoneyInMerchant.html">RedirectMoneyInMerchant</a>.
<a class="xref" href="DirectScale.Disco.Extension.SavedPaymentMoneyInMerchant.html">SavedPaymentMoneyInMerchant</a> is normally used to tokenize and process credit cards.
<a class="xref" href="DirectScale.Disco.Extension.SinglePaymentMoneyInMerchant.html">SinglePaymentMoneyInMerchant</a> is used to process payments without saved payment data. This can be something that can be looked up by the associate, like reward points.
<a class="xref" href="DirectScale.Disco.Extension.RedirectMoneyInMerchant.html">RedirectMoneyInMerchant</a> is used to forward the customer to the merchant's site to complete an order. This is done if the merchant can't process the payment as two separate steps (tokenize card, then charge card) and instead needs to control the full payment process. After the customer hits submit order, the order will be created in a pending state until they have completed the payment. Normally, after the payment is completed from the merchant's site, the merchant will then call a provided custom API endpoint to send the results of the attempted payment.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <h6><strong>Namespace</strong>: <a class="xref" href="DirectScale.Disco.Extension.html">DirectScale.Disco.Extension</a></h6>
  <h6><strong>Assembly</strong>: DirectScale.Disco.Extension.Abstractions.dll</h6>
  <h5 id="DirectScale_Disco_Extension_IMoneyInMerchant_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public interface IMoneyInMerchant</code></pre>
  </div>
  <h3 id="methods">Methods
  </h3>
  <a id="DirectScale_Disco_Extension_IMoneyInMerchant_GetNewPayerId_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.GetNewPayerId*"></a>
  <h4 id="DirectScale_Disco_Extension_IMoneyInMerchant_GetNewPayerId_System_Int32_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.GetNewPayerId(System.Int32)">GetNewPayerId(Int32)</h4>
  <div class="markdown level1 summary"><p>It is common for merchants to have their own accounts and ids for our customers, that will need to be used to process transactions for them. Override this method with logic for creating an account with the merchant and return the associate's PayerId with that merchant, if needed.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">string GetNewPayerId(int associateId)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td><span class="parametername">associateId</span></td>
        <td><p>The associate to create the external merchant account for.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><p>Override to return a merchant's Payer id for the associate, otherwise, the payerId used will be the <code data-dev-comment-type="paramref" class="paramref">associateId</code>.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.NotImplementedException</span></td>
        <td><p>If this interface is implemented directly, instead of one of it's child classes.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="DirectScale_Disco_Extension_IMoneyInMerchant_RefundPayment_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.RefundPayment*"></a>
  <h4 id="DirectScale_Disco_Extension_IMoneyInMerchant_RefundPayment_System_String_System_Int32_System_String_System_Double_System_Double_System_String_System_String_System_String_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.RefundPayment(System.String,System.Int32,System.String,System.Double,System.Double,System.String,System.String,System.String)">RefundPayment(String, Int32, String, Double, Double, String, String, String)</h4>
  <div class="markdown level1 summary"><p>Called when a refund has been submitted. Should include all custom work needed to return funds to the customer.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">PaymentResponse RefundPayment(string payerId, int orderNumber, string currencyCode, double paymentAmount, double refundAmount, string referenceNumber, string transactionNumber, string authorizationCode)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">payerId</span></td>
        <td><p>If GetNewPayerId has been overridden in your merchant it will be that payerId, otherwise the associateId is passed in.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td><span class="parametername">orderNumber</span></td>
        <td><p>The order that is having a payment refunded.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">currencyCode</span></td>
        <td><p>The currency the payment was processed in.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Double</span></td>
        <td><span class="parametername">paymentAmount</span></td>
        <td><p>The full amount charged.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Double</span></td>
        <td><span class="parametername">refundAmount</span></td>
        <td><p>The refund amount requested.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">referenceNumber</span></td>
        <td><p>This will match the value returned by ChargePayment when the payment was chared.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">transactionNumber</span></td>
        <td><p>This will match the value returned by ChargePayment when the payment was chared.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">authorizationCode</span></td>
        <td><p>This will match the value returned by ChargePayment when the payment was chared.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="DirectScale.Disco.Extension.PaymentResponse.html">PaymentResponse</a></td>
        <td><p>A PaymentResponse that will be written to the DB as a new negative payment.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="DirectScale_Disco_Extension_IMoneyInMerchant_RefundPayment_System_String_System_Int32_System_String_System_Double_System_Double_System_String_System_String_System_String__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This will write a new payment entry into the DB for <code data-dev-comment-type="paramref" class="paramref">orderNumber</code> for a negative amount, based on the return value PaymentResponse.Amount.
If the full amount of the order is refunded, then volume is adjusted or clawbacks occur as needed.</p>
</div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Exception</span></td>
        <td><p>If null is returned</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Exception</span></td>
        <td><p>If PaymentResponse.Status.Rejected</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="DirectScale_Disco_Extension_IMoneyInMerchant_ValidateCurrency_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.ValidateCurrency*"></a>
  <h4 id="DirectScale_Disco_Extension_IMoneyInMerchant_ValidateCurrency_System_String_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.ValidateCurrency(System.String)">ValidateCurrency(String)</h4>
  <div class="markdown level1 summary"><p>Allows the merchant to validate the currency before an charge/refund is attempted and return an error.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">ValidationResult ValidateCurrency(string paymentCurrencyCode)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">paymentCurrencyCode</span></td>
        <td><p>The currency code to be used in a charge/refund.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="DirectScale.Disco.Extension.ValidationResult.html">ValidationResult</a></td>
        <td><p>ValidationResult indicating if the process should continue, and an error message if there is one.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="DirectScale_Disco_Extension_IMoneyInMerchant_ValidateCurrency_System_String__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Default implementation will return an error if paymentCurrencyCode is not the same as the MerchantInfo.Currency provided at construction.
Override if different functionality is required.</p>
</div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.NotImplementedException</span></td>
        <td><p>If this interface is implemented directly, instead of one of it's child classes.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="DirectScale_Disco_Extension_IMoneyInMerchant_ValidatePayment_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.ValidatePayment*"></a>
  <h4 id="DirectScale_Disco_Extension_IMoneyInMerchant_ValidatePayment_System_String_DirectScale_Disco_Extension_NewPayment_" data-uid="DirectScale.Disco.Extension.IMoneyInMerchant.ValidatePayment(System.String,DirectScale.Disco.Extension.NewPayment)">ValidatePayment(String, NewPayment)</h4>
  <div class="markdown level1 summary"><p>Allows the merchant to validate a payment what is about to be charged or refuned and return an error.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">ValidationResult ValidatePayment(string payerId, NewPayment payment)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">payerId</span></td>
        <td><p>The associate's id for this merchant, or the associateId if no payerId is set.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="DirectScale.Disco.Extension.NewPayment.html">NewPayment</a></td>
        <td><span class="parametername">payment</span></td>
        <td><p>The payment about to be processed.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="DirectScale.Disco.Extension.ValidationResult.html">ValidationResult</a></td>
        <td><p>ValidationResult indicating if the process should continue, and an error message if there is one.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="DirectScale_Disco_Extension_IMoneyInMerchant_ValidatePayment_System_String_DirectScale_Disco_Extension_NewPayment__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Default implementation will never return an error.
Override to specify requirements for payments.</p>
</div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.NotImplementedException</span></td>
        <td><p>If this interface is implemented directly, instead of one of it's child classes.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h3 id="seealso">See Also</h3>
  <div class="seealso">
      <div><a class="xref" href="DirectScale.Disco.Extension.ICommissionMerchant.html">ICommissionMerchant</a></div>
  </div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright © 2021 <a href="https://directscale.com">DirectScale</a><br>Generated by <strong>DocFX</strong>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
